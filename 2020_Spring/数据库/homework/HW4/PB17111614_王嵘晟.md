# HW4
## PB17111614 王嵘晟
### 1.已知有关系模式R(A, B, C, D, E)，R上的一个函数依赖集如下：F={A→BC, B→CE, A→B, AB→C, AC→DE, E→A}
#### (1).求出F的最小函数依赖集（要求写出求解过程）
>首先利用分解律，将右边写成单属性，并去除重复FD：  
F={A&rightarrow;B,A&rightarrow;C,B&rightarrow;C,B&rightarrow;E,AB&rightarrow;C,AC&rightarrow;D,AC&rightarrow;E,E&rightarrow;A}  
然后消除左部冗余属性：  
F={A&rightarrow;B,A&rightarrow;C,B&rightarrow;C,B&rightarrow;E,A&rightarrow;D,C&rightarrow;D,A&rightarrow;E,C&rightarrow;E,E&rightarrow;A}  
消去冗余函数依赖：  
F={A&rightarrow;B,B&rightarrow;C,C&rightarrow;E,C&rightarrow;D,E&rightarrow;A}，即为所求最小依赖集
#### (2)求R的候选码，并给出证明
>R的候选码为{A},{B},{C},{E}，证明：  
&emsp;&emsp;首先根据F的最小依赖集F={A&rightarrow;B,B&rightarrow;C,C&rightarrow;E,C&rightarrow;D,E&rightarrow;A}，可知{A,B,C,E}&rightarrow;{A,B,C,D,E}，即{A,B,C,E}都是R的超码。对于集合{A},{B},{C},{E}来说，均满足不存在真子集Y使得Y&rightarrow;U成立，所以这四个集合都可以作为候选码，证毕
### 2.现有关系模式: R(A, B, C, D, E, F, G)，R上的一个函数依赖集：{AB→E, A→B, B→C, C→D}
#### (1).该关系模式满足第几范式? 为什么?
>这里认为该关系模式至少满足1NF。首先求出最小依赖集，为{A&rightarrow;B,B&rightarrow;E,B&rightarrow;C,C&rightarrow;D}，由此可推导出{A,F,G}&rightarrow;{A,B,C,D,E,F,G}所以,{A,F,G}是超码，由于{A,F,G}的任意真子集Y均不满足Y&rightarrow;{A,B,C,D,E,F,G}，所以{A,F,G}是候选码。由于只有这一个候选码，所以也是主码。对于非主属性B,C,D,E都部分函数依赖于主码，所以不满足2NF。所以只满足第一范式。
#### (2).如果将关系模式R分解为： R1(A, B, E) ，R2(B, C, D)，R3(A, F, G)，该数据库模式最高满足第几范式?
>F(R<sub>1</sub>)={A&rightarrow;B,B&rightarrow;E}  
F(R<sub>2</sub>)={B&rightarrow;C,C&rightarrow;D}  
F(R<sub>3</sub>)={A&rightarrow;A,F&rightarrow;F,G&rightarrow;G}
对于R<sub>1</sub>，只有一个主码A，非主属性B,E完全函数依赖于A，但有传递依赖关系，所以R<sub>1</sub>最高满足第二范式。  
同理R<sub>2</sub>只有一个主码B，非主属性C,D完全函数依赖于B，但有传递依赖关系，也最高满足第二范式。  
R<sub>3</sub>只由主码构成，非主属性为空，所以该数据库模式最高满足第二范式
### (3).请将关系模式R无损连接并且保持函数依赖地分解到3NF，要求给出具体步骤。
>1.求出最小FD集：{A&rightarrow;B,B&rightarrow;E,B&rightarrow;C,C&rightarrow;D}  
2.q={R<sub>1</sub>(A,B),R<sub>2</sub>(B,C,E),R<sub>3</sub>(C,D)}  
>3.R的主码为A,F,G&emsp;于是p= q &bigcup; {R(x)} = {R<sub>1</sub>(A,B),R<sub>2</sub>(B,C,E),R<sub>3</sub>(C,D),R<sub>4</sub>(A,F,G)}即为最终所求
### (4).请将关系模式R无损连接地分解到BCNF，要求给出步骤 。
>对于F={AB→E, A→B, B→C, C→D}  
AB&rightarrow;E,B→C,C→D不满足BCNF的定义，所以分解R：  
&rho;:={R<sub>1</sub>(A,B),R<sub>2</sub>(A,B,E),R<sub>3</sub>(B,C),R<sub>4</sub>(C,D)}  
AB&rightarrow;E不满足BCNF定义，分解R<sub>2</sub>:  
&rho;:={R<sub>1</sub>(A,B),R<sub>5</sub>(A,E),R<sub>3</sub>(B,C),R<sub>4</sub>(C,D)}即为所求