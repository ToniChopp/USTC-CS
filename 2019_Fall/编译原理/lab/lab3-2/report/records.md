# 团队工作记录

记录团队的学习过程和讨论过程，

## 学习过程

1. 首先，在得知了实验任务后我们分别进行了独自阅读源码，以确定选择哪两条Pass
2. 在第一次讨论中，确定了选择DCE和ADCE这两条Pass
3. 组长李岸宜同学进行了分工：两个人先各自着重阅读DCE源码并记录遇到的问题，等第二次讨论时解决。王嵘晟同学编写测试用的.cminus文件，用lab3-1的编译器生成.ll文件，并试着用DCE来做优化，标记被优化的内容
4. 经过第二次讨论解决了阅读DCE源码时遇到的问题，并且了解了DCE可以优化的死代码都有哪些

## 讨论1

时间：12月1日 15时到16时  
地点：寝室  
参与者：李岸宜 王嵘晟  
主题：对于Pass的最终确定  
[讨论的照片或截图]
![](.\figs\3.jpg)
### 过程描述
1. 在组员各自分别阅读了四个Pass的源码后，我们交流了意见，决定选择DCE和ADCE这两条Pass，把死代码删除做到底
2. 做了进一步分工，在接下来的两天中先攻克DCE并对DCE的优化效果做相关实验

### 结论
1. 选择了DCE和ADCE

## 讨论2

时间：12月3日 16时到17时  
地点：寝室   
参与者：李岸宜 王嵘晟  
主题：对于阅读DCE源码遇到的问题的讨论  
[讨论的照片或截图]  
![](.\figs\1.png)
![](.\figs\2.png)
### 过程描述
1. 由于不了解外部代码，对namespace不甚理解，所以阅读DCE源码时有很多函数的功能并不是完全理解
2. 我们在讨论的同时一起查找了LLVM官方文档，解决了问题
3. 给接下来阅读ADCE做了任务分配
### 结论
1. 解决了阅读DCE源码的问题，大概理解了DCE的工作流程

## 讨论3

时间：12月5日 15时到18时  
地点：寝室  
参与者：李岸宜 王嵘晟  
主题：对于阅读ADCE源码遇到的问题的讨论  
[讨论的照片或截图]
![](.\figs\4.png)
![](.\figs\5.png)
### 过程描述
1. 在阅读ADCE时对Phi的功能不太了解，所以进行了讨论。首先我们一起研读源码
2. 查询了官方文档并试着理解
3. 一起试着编写cminus文档并使用lab3-1的编译器生成llvm IR文件，分别用DCE和ADCE做优化以深入了解优化过程

### 结论
1. Phi的功能用来标记一个BasicBlock的前驱，当前驱有某个后继BasicBlock是不可达的，则对它做出优化，可以节省条件判断语句。例如 if(a | b)，如果a=1则直接跳转，无需对b做判别。

## 讨论4

时间：12月6日 15时到18时  
地点：寝室  
参与者：李岸宜 王嵘晟  
主题：对于编写生成可以优化的LLVM IR文件cminus文件的  探讨
[讨论的照片或截图]  

### 过程描述
1. 我们发现编写了很多cminus文件，生成LLVM IR文件后用DCE和ADCE优化出来都是知识对alloca进行了优化，所以我们尝试写出其他的优化
2. 我们尝试了e=5 if(e<4)这样的条件分支，发现并不能优化掉
3. 我们尝试了if(5<4)这样的条件分支，发现这样在生成LLVM IR代码的过程中就直接优化掉了，并不需要opt做优化。

### 结论
1. DCE和ADCE删除死代码时，可以删除无用的变量声明，或者重复声明，还有无用的计算式。
2. 经过多次探索，对于DCE和ADCE的工作流程有了一定的了解。